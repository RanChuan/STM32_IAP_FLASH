


			温控项目无线IAP程序

			模块程序编写：冉川

一、功能
	1.接受上位机的命令并进行程序更新
	2.flash偏移量为0x2800个字节
	3.适用于所有温控电路板
	4.刷有本程序的板子在通电或复位之后5秒内检测是否有程序更新命令，有就开始程序更新，没有就进入主程序
	5.程序更新完成之后会立即运行新程序

二、实现
	1.通过无线模块与上位机通讯
	2.使用自定义协议进行应用程序更新

三、逻辑
	1.通过串口中断接受命令，命令接受完成后通过标志位通知主函数命令接受完成，
	  可以进行命令解码了
	2.单片机上电5秒内检测是否有程序更新命令，有就执行程序更新，没有就检测是否有APP程序并尝试跳转到APP程序。

2018.9.11
	完成了所有代码编写
2018.9.12
	解决一些bug
	所有功能检测通过
2018.9.13
	处理主机没有收到操作成功返回的情况，提高程序下载稳定性
2018.9.15
	修改flash写入逻辑，适应flash块大小为1024k和2048k的情况
2018.9.21
	进入写flash模式就不再计时
2018.10.8
	解决数据长度校验错误的问题
2018.10.25
	加入串口空闲等待超时，防止死机
	
*-*-*-*-*-*-*-*-*-*-*--*-*--*--*-*--*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*
2019.3.7 改为使用FLASH来更新用户应用程序，改完了所有遇到的bug，程序正常运行
	使用方法：
		在用户应用程序中通过一些方式把用于升级的程序存储在指定的外部flash中，然后执行复位指令
		在IAP中进行用户程序的升级
		这个IAP只有有外部FLASH的板子可以使用
	精简了IAP程序的大小，只占用3KB左右的FLASH空间
	提供iap版本信息








